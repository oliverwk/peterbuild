let producten = [{ "id": 2247727, "title": "Handgemaakte sfeervolle en praktische plank voor tussen de badrand", "description": "Sfeervol, multifunctioneel design bathboard voor het bad.<br \/>Deze is te gebruiken om bv. telefoon, tablet of laptop op te zetten, maar gewoon een kaarsje en een lekker glas wijn of potje bier kan natuurlijk ook. In overleg op maat te maken, prijs zoals opgegeven is voor het getoonde model", "active": true, "shipping": { "id": 1763812, "name": "Verzendkosten", "cost": "750", "webshopSettingsId": 1591565 }, "taxOption": { "id": 1115755, "percentage": 21, "webshopSettingsId": 1591565, "title": "BTW Hoog", "description": "BTW Hoog (21%)" }, "productLabelActive": false, "productLabel": null, "url": "\/product\/2247727\/handgemaakte-sfeervolle-en-praktische-plank-voor-tussen-de-badrand", "images": [{ "id": 30058238, "url": "https:\/\/f.eu1.jwwb.nl\/public\/n\/s\/o\/temp-siyxdkysiielgjlmtloa\/PHOTO-2020-08-31-20-12-422.jpg", "width": 800, "height": 600 }, { "id": 30058272, "url": "https:\/\/f.eu1.jwwb.nl\/public\/n\/s\/o\/temp-siyxdkysiielgjlmtloa\/PHOTO-2020-08-31-20-12-42.jpg", "width": 800, "height": 600 }, { "id": 30058249, "url": "https:\/\/f.eu1.jwwb.nl\/public\/n\/s\/o\/temp-siyxdkysiielgjlmtloa\/PHOTO-2020-08-31-20-20-372.jpg", "width": 800, "height": 600 }, { "id": 30058263, "url": "https:\/\/f.eu1.jwwb.nl\/public\/n\/s\/o\/temp-siyxdkysiielgjlmtloa\/PHOTO-2020-08-31-20-20-42.jpg", "width": 800, "height": 600 }], "variants": [{ "id": 7705609, "price": 4950, "oldPrice": null, "onSale": false, "stock": 1, "limited": true, "position": 0, "weight": 0, "freeShippingMotivator": false, "propertyValues": [], "product": { "id": 2247727, "title": "Handgemaakte sfeervolle en praktische plank voor tussen de badrand" } }], "accumulatedStock": 1, "primaryVariantId": 7705609, "thumbnailUrl": "https:\/\/t.eu1.jwwb.nl\/W1591565\/ywoZpKIS58nLITKki5e0m2wRuzk=\/169x126\/filters:no_upscale():quality(40)\/f.eu1.jwwb.nl%2Fpublic%2Fn%2Fs%2Fo%2Ftemp-siyxdkysiielgjlmtloa%2Fmvkwqk%2FPHOTO-2020-08-31-20-12-422.jpg", "titleTag": null, "metaDescription": "", "indexEnabled": true, "variantProperties": [], "fields": [] },
{ "id": 2272456, "title": "Hand gezaagde cijfers en letters (getoonde prijs is voor de 5)", "description": "Hand gezaagde en dus altijd unieke cijfers en letters. Elke naam en elk nummer is mogelijk, minimale maat is ongeveer 7cm hoog en 6 breed. Maximale maat? in overleg.", "active": true, "shipping": { "id": 1763812, "name": "Verzendkosten", "cost": "750", "webshopSettingsId": 1591565 }, "taxOption": { "id": 1115755, "percentage": 21, "webshopSettingsId": 1591565, "title": "BTW Hoog", "description": "BTW Hoog (21%)" }, "productLabelActive": false, "productLabel": null, "url": "\/product\/2272456\/hand-gezaagde-cijfers-en-letters-getoonde-prijs-is-voor-de-5", "images": [{ "id": 30243200, "url": "https:\/\/f.eu1.jwwb.nl\/public\/n\/s\/o\/temp-siyxdkysiielgjlmtloa\/2BE09323-67BD-4815-B818-34A5956E4CDB-1.jpg", "width": 800, "height": 1422 }, { "id": 30243205, "url": "https:\/\/f.eu1.jwwb.nl\/public\/n\/s\/o\/temp-siyxdkysiielgjlmtloa\/fullsizeoutput_394d.jpeg", "width": 800, "height": 450 }, { "id": 30243502, "url": "https:\/\/f.eu1.jwwb.nl\/public\/n\/s\/o\/temp-siyxdkysiielgjlmtloa\/h5gZKqy5QQeiOANkpsi4qg.jpg", "width": 800, "height": 1066 }, { "id": 30243493, "url": "https:\/\/f.eu1.jwwb.nl\/public\/n\/s\/o\/temp-siyxdkysiielgjlmtloa\/fullsizeoutput_3b9b.jpeg", "width": 800, "height": 600 }], "variants": [{ "id": 7786426, "price": 1495, "oldPrice": null, "onSale": false, "stock": 0, "limited": false, "position": 0, "weight": 0, "freeShippingMotivator": false, "propertyValues": [], "product": { "id": 2272456, "title": "Hand gezaagde cijfers en letters (getoonde prijs is voor de 5)" } }], "accumulatedStock": null, "primaryVariantId": 7786426, "thumbnailUrl": "https:\/\/t.eu1.jwwb.nl\/W1591565\/TC8xoH_nCQOdTCQ1YDoVOZKeDTM=\/169x126\/filters:no_upscale():quality(40)\/f.eu1.jwwb.nl%2Fpublic%2Fn%2Fs%2Fo%2Ftemp-siyxdkysiielgjlmtloa%2Fp8hjr3%2F2BE09323-67BD-4815-B818-34A5956E4CDB-1.jpg", "titleTag": null, "metaDescription": "", "indexEnabled": true, "variantProperties": [], "fields": [] },
{ "id": 2247500, "title": "Handgemaakte standaard voor allerlei toepassingen (dit is slechts een voorbeeld)", "description": "Standaard voor, in dit geval de keuken. De mogelijkheden zijn vrijwel onbeperkt, denk bijvoorbeeld aan een:<br \/>- pollepelstandaard<br \/>- kookboek of receptstandaard<br \/>- een plateau voor de kruiden in gebruik<br \/>- enz. In overleg op maat te maken, prijs zoals opgegeven is voor het getoonde model.", "active": true, "shipping": { "id": 1763812, "name": "Verzendkosten", "cost": "750", "webshopSettingsId": 1591565 }, "taxOption": { "id": 1115755, "percentage": 21, "webshopSettingsId": 1591565, "title": "BTW Hoog", "description": "BTW Hoog (21%)" }, "productLabelActive": false, "productLabel": null, "url": "\/product\/2247500\/handgemaakte-standaard-voor-allerlei-toepassingen-dit-is-slechts-een-voorbeeld", "images": [{ "id": 30056053, "url": "https:\/\/f.eu1.jwwb.nl\/public\/n\/s\/o\/temp-siyxdkysiielgjlmtloa\/image-2.png", "width": 799, "height": 738 }, { "id": 30056098, "url": "https:\/\/f.eu1.jwwb.nl\/public\/n\/s\/o\/temp-siyxdkysiielgjlmtloa\/image-3.png", "width": 799, "height": 712 }], "variants": [{ "id": 7704246, "price": 2995, "oldPrice": null, "onSale": false, "stock": 1, "limited": true, "position": 0, "weight": 0, "freeShippingMotivator": false, "propertyValues": [], "product": { "id": 2247500, "title": "Handgemaakte standaard voor allerlei toepassingen (dit is slechts een voorbeeld)" } }], "accumulatedStock": 1, "primaryVariantId": 7704246, "thumbnailUrl": "https:\/\/t.eu1.jwwb.nl\/W1591565\/i_kNo2-vHzKergJAUJer3UHsClM=\/169x126\/filters:no_upscale():quality(40)\/f.eu1.jwwb.nl%2Fpublic%2Fn%2Fs%2Fo%2Ftemp-siyxdkysiielgjlmtloa%2Fff0ozt%2Fimage-2.png", "titleTag": null, "metaDescription": "", "indexEnabled": true, "variantProperties": [], "fields": [] },
{ "id": 2223795, "title": "Handgemaakte tafel lamp van drijfhout uit Spanje.", "description": "Ik heb deze tafellamp gemaakt van door mijzelf gevonden drijfhout uit Spanje. De lamp is te voorzien van meerdere kleuren lampenkappen en kan ook rond of vierkant.", "active": true, "shipping": { "id": 1763812, "name": "Verzendkosten", "cost": "750", "webshopSettingsId": 1591565 }, "taxOption": { "id": 1115755, "percentage": 21, "webshopSettingsId": 1591565, "title": "BTW Hoog", "description": "BTW Hoog (21%)" }, "productLabelActive": false, "productLabel": null, "url": "\/product\/2223795\/handgemaakte-tafel-lamp-van-drijfhout-uit-spanje", "images": [{ "id": 29899139, "url": "https:\/\/f.eu1.jwwb.nl\/public\/n\/s\/o\/temp-siyxdkysiielgjlmtloa\/fullsizeoutput_3b70.jpeg", "width": 800, "height": 2041 }, { "id": 29899196, "url": "https:\/\/f.eu1.jwwb.nl\/public\/n\/s\/o\/temp-siyxdkysiielgjlmtloa\/fullsizeoutput_3839.jpeg", "width": 800, "height": 1573 }], "variants": [{ "id": 7618022, "price": 8995, "oldPrice": null, "onSale": false, "stock": 1, "limited": true, "position": 0, "weight": 0, "freeShippingMotivator": false, "propertyValues": [], "product": { "id": 2223795, "title": "Handgemaakte tafel lamp van drijfhout uit Spanje." } }], "accumulatedStock": 1, "primaryVariantId": 7618022, "thumbnailUrl": "https:\/\/t.eu1.jwwb.nl\/W1591565\/FNc50-xPsUKZevlH_9eM8eWotKM=\/169x126\/filters:no_upscale():quality(40)\/f.eu1.jwwb.nl%2Fpublic%2Fn%2Fs%2Fo%2Ftemp-siyxdkysiielgjlmtloa%2Fy0l674%2Ffullsizeoutput_3b70.jpeg", "titleTag": null, "metaDescription": "", "indexEnabled": true, "variantProperties": [], "fields": [] },
{ "id": 2247983, "title": "Kapschuur (getoonde prijs is voor dit project) in overleg volgens tekening ter plekke gebouwd.", "description": "Ik maak een kapschuur op maat in overleg en volgens schets/tekening.<br \/>Geen bouwpakket, alles wordt ter plekke met de hand verwerkt volgens wens. Ik maak graag een offerte voor u. <br> Getoond exemplaar is 40m2 en heeft een bouwtijd van ongeveer 2 weken.Om een idee van deze kap te krijgen de volgen informatie.<br \/>Balkmaten zijn, staande balken, 150x150mm<br \/>Liggers, 150x70mm<br \/>gordingen, 70x50mm<br \/>Prijs op aanvraag", "active": true, "shipping": { "id": 1763813, "name": "Geen verzendkosten", "cost": "0", "webshopSettingsId": 1591565 }, "taxOption": { "id": 1115755, "percentage": 21, "webshopSettingsId": 1591565, "title": "BTW Hoog", "description": "BTW Hoog (21%)" }, "productLabelActive": false, "productLabel": null, "url": "\/product\/2247983\/kapschuur-getoonde-prijs-is-voor-dit-project-in-overleg-volgens-tekening-ter-plekke-gebouwd", "images": [{ "id": 30062416, "url": "https:\/\/f.eu1.jwwb.nl\/public\/n\/s\/o\/temp-siyxdkysiielgjlmtloa\/1BGyuXnaSCCvTFdrFUalw.jpg", "width": 800, "height": 600 }, { "id": 30062320, "url": "https:\/\/f.eu1.jwwb.nl\/public\/n\/s\/o\/temp-siyxdkysiielgjlmtloa\/4BiFTUOyQPmDsstQzGsDRQ.jpg", "width": 800, "height": 600 }, { "id": 30062330, "url": "https:\/\/f.eu1.jwwb.nl\/public\/n\/s\/o\/temp-siyxdkysiielgjlmtloa\/I3mfKNt9TLOCOK18mP2qgA.jpg", "width": 800, "height": 600 }, { "id": 30062355, "url": "https:\/\/f.eu1.jwwb.nl\/public\/n\/s\/o\/temp-siyxdkysiielgjlmtloa\/R1KkClYcQiFwRaOabUBEA.jpg", "width": 800, "height": 600 }, { "id": 30062551, "url": "https:\/\/f.eu1.jwwb.nl\/public\/n\/s\/o\/temp-siyxdkysiielgjlmtloa\/OnE5iSRS6KvwrigVe3CA.jpg", "width": 800, "height": 600 }, { "id": 30062391, "url": "https:\/\/f.eu1.jwwb.nl\/public\/n\/s\/o\/temp-siyxdkysiielgjlmtloa\/HXIGDCl5TXmpWGPssfQ4QQ.jpg", "width": 800, "height": 600 }, { "id": 30062376, "url": "https:\/\/f.eu1.jwwb.nl\/public\/n\/s\/o\/temp-siyxdkysiielgjlmtloa\/oAIPjjWnSDCywRETsibGQ.jpg", "width": 800, "height": 600 }, { "id": 30062300, "url": "https:\/\/f.eu1.jwwb.nl\/public\/n\/s\/o\/temp-siyxdkysiielgjlmtloa\/4ED036C6-DF78-4377-B694-00ECDC91BABF.jpg", "width": 800, "height": 450 }, { "id": 30062543, "url": "https:\/\/f.eu1.jwwb.nl\/public\/n\/s\/o\/temp-siyxdkysiielgjlmtloa\/edf94b7f-1e49-4303-a967-bf8e456b2f66.jpg", "width": 768, "height": 1024 }, { "id": 30062584, "url": "https:\/\/f.eu1.jwwb.nl\/public\/n\/s\/o\/temp-siyxdkysiielgjlmtloa\/8e05de1e-7098-4f25-8e45-39c5d9b81633.jpg", "width": 720, "height": 1280 }], "variants": [{ "id": 7707595, "price": 0, "oldPrice": null, "onSale": false, "stock": 1, "limited": true, "position": 0, "weight": 0, "freeShippingMotivator": false, "propertyValues": [], "product": { "id": 2247983, "title": "Kapschuur (getoonde prijs is voor dit project) in overleg volgens tekening ter plekke gebouwd." } }], "accumulatedStock": 1, "primaryVariantId": 7707595, "thumbnailUrl": "https:\/\/t.eu1.jwwb.nl\/W1591565\/YZp8XPK3sEPDMdM5PsCeFNDeeV0=\/169x126\/filters:no_upscale():quality(40)\/f.eu1.jwwb.nl%2Fpublic%2Fn%2Fs%2Fo%2Ftemp-siyxdkysiielgjlmtloa%2F9p8cx7%2F1BGyuXnaSCCvTFdrFUalw.jpg", "titleTag": null, "metaDescription": "", "indexEnabled": true, "variantProperties": [], "fields": [] },
{ "id": 2247858, "title": "Staande steigerhouten designlamp, 3-laags, kan ook 2-laags of enkel.", "description": "Staande steigerhouten designlamp, 3-laags, kan ook is 2-laags of enkel.<br \/>Ook hier zijn meerdere mogelijkheden te bedenken, horizontaal hangend aan de muur, enkelvoudig als tafellamp, op het dressoir, vensterbank of op het nachtkastje. <br\/>Prijs zoals opgegeven is voor het getoonde model.", "active": true, "shipping": { "id": 1763812, "name": "Verzendkosten", "cost": "750", "webshopSettingsId": 1591565 }, "taxOption": { "id": 1115755, "percentage": 21, "webshopSettingsId": 1591565, "title": "BTW Hoog", "description": "BTW Hoog (21%)" }, "productLabelActive": false, "productLabel": null, "url": "\/product\/2247858\/staande-steigerhouten-designlamp-3-laags-kan-ook-2-laags-of-enkel", "images": [{ "id": 30059927, "url": "https:\/\/f.eu1.jwwb.nl\/public\/n\/s\/o\/temp-siyxdkysiielgjlmtloa\/PHOTO-2020-08-31-21-03-0612.jpg", "width": 768, "height": 1024 }, { "id": 30059983, "url": "https:\/\/f.eu1.jwwb.nl\/public\/n\/s\/o\/temp-siyxdkysiielgjlmtloa\/PHOTO-2020-08-31-21-03-067.jpg", "width": 768, "height": 1024 }], "variants": [{ "id": 7706184, "price": 17995, "oldPrice": null, "onSale": false, "stock": 1, "limited": true, "position": 0, "weight": 0, "freeShippingMotivator": false, "propertyValues": [], "product": { "id": 2247858, "title": "Staande steigerhouten designlamp, 3-laags, kan ook 2-laags of enkel." } }], "accumulatedStock": 1, "primaryVariantId": 7706184, "thumbnailUrl": "https:\/\/t.eu1.jwwb.nl\/W1591565\/twO8jpEozVG6xX_3za0QS8ceB5U=\/169x126\/filters:no_upscale():quality(40)\/f.eu1.jwwb.nl%2Fpublic%2Fn%2Fs%2Fo%2Ftemp-siyxdkysiielgjlmtloa%2F7wckxh%2FPHOTO-2020-08-31-21-03-0612.jpg", "titleTag": null, "metaDescription": "", "indexEnabled": true, "variantProperties": [], "fields": [] }];

let main = document.getElementsByTagName("main")[0];

function AddProduct(product) {
    let imgDiv = document.createElement("div");
    imgDiv.className = "div";
    main.appendChild(imgDiv);
    let img = document.createElement("img");
    img.className = "img";
    img.src = product.images[product.images.length - 1].url;
    img.alt = product.title;
    img.title = product.title;
    imgDiv.appendChild(img);
    let div = document.createElement("div");
    main.appendChild(div);
    let title = document.createElement("h1");
    title.className = "title";
    title.innerText = product.title;
    div.appendChild(title);
    let prijs = document.createElement("h3");
    prijs.className = "prijs";
    prijs.innerText = "€"+(product.variants[0].price / 100).toFixed(2);
    div.appendChild(prijs);
    let p = document.createElement("p");
    p.className = "detail";
    p.innerHTML = product.description.replaceAll("\/","/");
    div.appendChild(p);
    let br = document.createElement("br");
    div.appendChild(br);
    let divs = document.createElement("div");
    divs.className = "div"
    div.appendChild(divs);
    let btn = document.createElement("button");
    btn.setAttribute("type", "button");
    btn.innerText = "KOOP NU";
    btn.className = "button";
    btn.setAttribute("id", "submit");
    divs.appendChild(btn);
}

let id = document.location.search.split("=")[1];
console.log(id);
let product = producten.find(item => {
    return item.id == id;
});

if (product) {
    AddProduct(product)
} else {
    document.getElementsByTagName("main")[0].innerHTML = '<h1 class="error">Product niet gevonden.</h1><br><button onclick="window.location=`/webshop.html`" class="btn-error">Terug</button>';
}


//Dit is voor betalen
fetch('https://peterbuildpay.herokuapp.com/config')
.then(function (result) {
    return result.json();
})
.then(function (json) {
    window.config = json;
    window.stripe = Stripe(config.publicKey);
});

// When the form is submitted...
var submitBtn = document.querySelector('#submit');
submitBtn.addEventListener('click', function (evt) {
    
    // Create the checkout session.
    fetch('https://peterbuildpay.herokuapp.com/create-checkout-session', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json',
    },
    body: JSON.stringify({
        quantity: 1,
    }),
}).then(function (result) {
    return result.json();
}).then(function (data) {
    // Redirect to Checkout. with the ID of the
    // CheckoutSession created on the server.
    stripe.redirectToCheckout({
        sessionId: data.sessionId,
    })
    .then(function (result) {
        // If redirection fails, display an error to the customer.
        if (result.error) {
            var displayError = document.getElementById('error-message');
            displayError.textContent = result.error.message;
        }
    });
});
});
